<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"it"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Quiz Tonalità Musicali</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Tailwind CSS --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>tailwind</span><span class="s7">.</span><span class="s1">config </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>theme</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>extend</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>fontFamily</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>sans</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'system-ui'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'sans-serif'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>boxShadow</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">'card'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- React &amp; Babel --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/react@18/umd/react.development.js"</span><span class="s4"> </span><span class="s2">crossorigin</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/react-dom@18/umd/react-dom.development.js"</span><span class="s4"> </span><span class="s2">crossorigin</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/@babel/standalone/babel.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Lucide Icons --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/lucide@latest"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Correzione: Aggiunti prefissi webkit per compatibilità mobile */</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.perspective-1000</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">perspective:</span><span class="s4"> </span><span class="s10">1000px</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.transform-style-3d</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">transform-style:</span><span class="s4"> </span><span class="s5">preserve-3d</span><span class="s7">;</span><span class="s4"> </span><span class="s1">-webkit-transform-style:</span><span class="s4"> </span><span class="s5">preserve-3d</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.backface-hidden</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">backface-visibility:</span><span class="s4"> </span><span class="s5">hidden</span><span class="s7">;</span><span class="s4"> </span><span class="s1">-webkit-backface-visibility:</span><span class="s4"> </span><span class="s5">hidden</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.rotate-y-180</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">transform:</span><span class="s4"> </span><span class="s5">rotateY(</span><span class="s10">180deg</span><span class="s5">)</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">html</span><span class="s7">,</span><span class="s4"> </span><span class="s1">body</span><span class="s7">,</span><span class="s4"> </span><span class="s1">#root</span><span class="s4"> </span><span class="s7">{</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s10">100%</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s10">0</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">overflow-x:</span><span class="s1"> </span><span class="s5">hidden</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #f8fafc</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">input</span><span class="s7">[</span><span class="s5">type</span><span class="s7">=</span><span class="s5">number</span><span class="s7">]</span><span class="s1">::-webkit-inner-spin-button</span><span class="s7">,</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">input</span><span class="s7">[</span><span class="s5">type</span><span class="s7">=</span><span class="s5">number</span><span class="s7">]</span><span class="s1">::-webkit-outer-spin-button</span><span class="s4"> </span><span class="s7">{</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">-webkit-appearance:</span><span class="s4"> </span><span class="s5">none</span><span class="s7">;</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s10">0</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"root"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text/babel"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const { useState, useEffect, useMemo } = React;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>// --- HELPER PER ICONE LUCIDE ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const createLucideIcon = (name) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const iconData = lucide.icons[name];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (!iconData) return (props) =&gt; &lt;div {...props}&gt;?&lt;/div&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>return (props) =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;svg</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>xmlns="http://www.w3.org/2000/svg"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>width={props.size || 24}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>height={props.size || 24}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>viewBox="0 0 24 24"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>fill="none"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>stroke="currentColor"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>strokeWidth={props.strokeWidth || 2}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>strokeLinecap="round"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>strokeLinejoin="round"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>className={props.className}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>{...props}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>{iconData.map((data, index) =&gt; React.createElement(data[0], { key: index, ...data[1] }))}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/svg&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const RefreshCw = createLucideIcon('RefreshCw');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const CheckCircle = createLucideIcon('CheckCircle');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const XCircle = createLucideIcon('XCircle');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const Music = createLucideIcon('Music');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const Hash = createLucideIcon('Hash');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const Zap = createLucideIcon('Zap');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const ArrowRight = createLucideIcon('ArrowRight');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const RotateCcw = createLucideIcon('RotateCcw');</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>// --- ICONA BEMOLLE CUSTOM ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const FlatIcon = ({ size = 24, className, strokeWidth = 2.5 }) =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;svg<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>xmlns="http://www.w3.org/2000/svg"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>width={size}<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>height={size}<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>viewBox="0 0 24 24"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>fill="none"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>stroke="currentColor"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>strokeWidth={strokeWidth}<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>strokeLinecap="round"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>strokeLinejoin="round"<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>className={className}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;path d="M8 4v14" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;path d="M8 12c0 0 1.5 2 4.5 2s4.5-2.5 4.5-4.5c0-2.5-2.5-4-4.5-4h-4" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/svg&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>// --- DATI DELLE TONALITÀ ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const keysData = [</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 1, name: "Do Maggiore", subName: "(C)", alterationCount: 0, alterationsList: "Nessuna", isSharp: null, notesIndices: [0, 2, 4, 5, 7, 9, 11], tonicIndex: 0, color: "#64748b", textColor: "text-slate-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 2, name: "Sol Maggiore", subName: "(G)", alterationCount: 1, alterationsList: "Fa#", isSharp: true, notesIndices: [7, 9, 11, 0, 2, 4, 6], tonicIndex: 7, color: "#ef4444", textColor: "text-red-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 3, name: "Re Maggiore", subName: "(D)", alterationCount: 2, alterationsList: "Fa#, Do#", isSharp: true, notesIndices: [2, 4, 6, 7, 9, 11, 1], tonicIndex: 2, color: "#f97316", textColor: "text-orange-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 4, name: "La Maggiore", subName: "(A)", alterationCount: 3, alterationsList: "Fa#, Do#, Sol#", isSharp: true, notesIndices: [9, 11, 1, 2, 4, 6, 8], tonicIndex: 9, color: "#eab308", textColor: "text-yellow-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 5, name: "Mi Maggiore", subName: "(E)", alterationCount: 4, alterationsList: "Fa#, Do#, Sol#, Re#", isSharp: true, notesIndices: [4, 6, 8, 9, 11, 1, 3], tonicIndex: 4, color: "#84cc16", textColor: "text-lime-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 6, name: "Si Maggiore", subName: "(B)", alterationCount: 5, alterationsList: "Fa#, Do#, Sol#, Re#, La#", isSharp: true, notesIndices: [11, 1, 3, 4, 6, 8, 10], tonicIndex: 11, color: "#22c55e", textColor: "text-green-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 7, name: "Fa# Maggiore", subName: "(F#)", alterationCount: 6, alterationsList: "Fa#, Do#, Sol#, Re#, La#, Mi#", isSharp: true, notesIndices: [6, 8, 10, 11, 1, 3, 5], tonicIndex: 6, color: "#0ea5e9", textColor: "text-sky-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 8, name: "Do# Maggiore", subName: "(C#)", alterationCount: 7, alterationsList: "Fa#, Do#, Sol#, Re#, La#, Mi#, Si#", isSharp: true, notesIndices: [1, 3, 5, 6, 8, 10, 0], tonicIndex: 1, color: "#3b82f6", textColor: "text-blue-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 9, name: "Fa Maggiore", subName: "(F)", alterationCount: 1, alterationsList: "Si♭", isSharp: false, notesIndices: [5, 7, 9, 10, 0, 2, 4], tonicIndex: 5, color: "#a855f7", textColor: "text-purple-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 10, name: "Si♭ Maggiore", subName: "(B♭)", alterationCount: 2, alterationsList: "Si♭, Mi♭", isSharp: false, notesIndices: [10, 0, 2, 3, 5, 7, 9], tonicIndex: 10, color: "#d946ef", textColor: "text-fuchsia-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 11, name: "Mi♭ Maggiore", subName: "(E♭)", alterationCount: 3, alterationsList: "Si♭, Mi♭, La♭", isSharp: false, notesIndices: [3, 5, 7, 8, 10, 0, 2], tonicIndex: 3, color: "#ec4899", textColor: "text-pink-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 12, name: "La♭ Maggiore", subName: "(A♭)", alterationCount: 4, alterationsList: "Si♭, Mi♭, La♭, Re♭", isSharp: false, notesIndices: [8, 10, 0, 1, 3, 5, 7], tonicIndex: 8, color: "#f43f5e", textColor: "text-rose-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 13, name: "Re♭ Maggiore", subName: "(D♭)", alterationCount: 5, alterationsList: "Si♭, Mi♭, La♭, Re♭, Sol♭", isSharp: false, notesIndices: [1, 3, 5, 6, 8, 10, 0], tonicIndex: 1, color: "#14b8a6", textColor: "text-teal-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 14, name: "Sol♭ Maggiore", subName: "(G♭)", alterationCount: 6, alterationsList: "Si♭, Mi♭, La♭, Re♭, Sol♭, Do♭", isSharp: false, notesIndices: [6, 8, 10, 11, 1, 3, 5], tonicIndex: 6, color: "#10b981", textColor: "text-emerald-600" },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>{ id: 15, name: "Do♭ Maggiore", subName: "(C♭)", alterationCount: 7, alterationsList: "Si♭, Mi♭, La♭, Re♭, Sol♭, Do♭, Fa♭", isSharp: false, notesIndices: [11, 1, 3, 4, 6, 8, 10], tonicIndex: 11, color: "#6366f1", textColor: "text-indigo-600" }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>// --- COMPONENTI ---</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const PianoKeyboard = ({ activeNotes, dotColor, tonicIndex }) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const whiteKeys = [0, 2, 4, 5, 7, 9, 11];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const blackKeys = [1, 3, 6, 8, 10];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const whiteKeyIndexMap = {0:0, 2:1, 4:2, 5:3, 7:4, 9:5, 11:6};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const wH = 100; const wW = 40; const keyWidth = 40; const octaveWidth = keyWidth * 7;<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>let tonicXOffset = 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>if (whiteKeyIndexMap.hasOwnProperty(tonicIndex)) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>tonicXOffset = whiteKeyIndexMap[tonicIndex] * keyWidth;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>} else {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const xPosMap = {1: 28, 3: 68, 6: 148, 8: 188, 10: 228};<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>tonicXOffset = xPosMap[tonicIndex];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const padding = 0.5 * keyWidth; const viewBoxStart = tonicXOffset - padding; const viewBoxWidth = 320;<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const drawOctave = (offsetX) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const elements = [];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>whiteKeys.forEach((note, index) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>const x = offsetX + index * wW;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>let isScaleNote = activeNotes.includes(note);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>let shouldDrawDot = false;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>if (isScaleNote) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>if (note &gt;= tonicIndex) { if (offsetX === 0) shouldDrawDot = true; }<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>else { if (offsetX === octaveWidth) shouldDrawDot = true; }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>elements.push(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;g key={`w-${note}-${offsetX}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;rect x={x} y={0} width={wW} height={wH} fill="white" stroke="#e2e8f0" strokeWidth="1" className="transition-all" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>{shouldDrawDot &amp;&amp; &lt;circle cx={x + wW/2} cy={wH - 15} r={6} fill={dotColor} /&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/g&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const bW = 24; const bH = 65;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>blackKeys.forEach((note) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>const xPosMap = {1: 28, 3: 68, 6: 148, 8: 188, 10: 228};<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>const x = offsetX + xPosMap[note];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>let isScaleNote = activeNotes.includes(note);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>let shouldDrawDot = false;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>if (isScaleNote) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>if (note &gt;= tonicIndex) { if (offsetX === 0) shouldDrawDot = true; }<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>else { if (offsetX === octaveWidth) shouldDrawDot = true; }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>elements.push(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;g key={`b-${note}-${offsetX}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;rect x={x} y={0} width={bW} height={bH} fill="#1e293b" stroke="#0f172a" className="transition-all" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>{shouldDrawDot &amp;&amp; &lt;circle cx={x + bW/2} cy={bH - 12} r={5} fill={dotColor} stroke="white" strokeWidth={2} /&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/g&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>return elements;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div className="flex justify-center mt-2 overflow-hidden rounded-lg bg-white"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;svg width="100%" height={wH} viewBox={`${viewBoxStart} 0 ${viewBoxWidth} ${wH}`} preserveAspectRatio="xMinYMin meet" className="max-w-full"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>{drawOctave(-octaveWidth)} {drawOctave(0)} {drawOctave(octaveWidth)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/svg&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const QuizSelection = ({ setMode }) =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div className="flex flex-col items-center justify-center p-6 space-y-5 bg-white rounded-3xl shadow-card w-full max-w-md h-auto min-h-[400px] border border-slate-100"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onClick={() =&gt; setMode('sharps')} className="group relative w-full py-6 px-6 bg-gradient-to-br from-red-500 to-red-600 text-white rounded-2xl shadow-lg hover:shadow-red-200 transform transition-all duration-200 hover:scale-[1.02] hover:from-red-600 hover:to-red-700 active:scale-[.98]"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="flex items-center justify-between"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="flex items-center gap-5"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="p-3 bg-white/20 rounded-xl backdrop-blur-sm"&gt;&lt;Hash size={32} /&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="text-left"&gt;&lt;span className="block text-3xl font-bold tracking-tight leading-none"&gt;Diesis&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;ArrowRight className="opacity-60 group-hover:opacity-100 group-hover:translate-x-1 transition-all" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onClick={() =&gt; setMode('flats')} className="group relative w-full py-6 px-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl shadow-lg hover:shadow-blue-200 transform transition-all duration-200 hover:scale-[1.02] hover:from-blue-600 hover:to-blue-700 active:scale-[.98]"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="flex items-center justify-between"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="flex items-center gap-5"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="w-[56px] h-[56px] flex items-center justify-center bg-white/20 rounded-xl backdrop-blur-sm"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;span className="text-4xl font-medium leading-none translate-y-1"&gt;♭&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="text-left"&gt;&lt;span className="block text-3xl font-bold tracking-tight leading-none"&gt;Bemolle&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;ArrowRight className="opacity-60 group-hover:opacity-100 group-hover:translate-x-1 transition-all" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onClick={() =&gt; setMode('mix')} className="group relative w-full py-6 px-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-2xl shadow-lg hover:shadow-purple-200 transform transition-all duration-200 hover:scale-[1.02] hover:from-purple-600 hover:to-purple-700 active:scale-[.98]"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="flex items-center justify-between"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="flex items-center gap-5"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="p-3 bg-white/20 rounded-xl backdrop-blur-sm"&gt;&lt;Zap size={32} /&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="text-left"&gt;&lt;span className="block text-3xl font-bold tracking-tight leading-none"&gt;Tutte le tonalità&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;ArrowRight className="opacity-60 group-hover:opacity-100 group-hover:translate-x-1 transition-all" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const KeySignatureQuiz = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const [quizMode, setQuizMode] = useState('select');<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const [currentKey, setCurrentKey] = useState(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const [isFlipped, setIsFlipped] = useState(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const [userGuess, setUserGuess] = useState('');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const [feedback, setFeedback] = useState(null);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const filteredKeys = useMemo(() =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (quizMode === 'sharps') return keysData.filter(key =&gt; key.isSharp === true);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (quizMode === 'flats') return keysData.filter(key =&gt; key.isSharp === false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (quizMode === 'mix') return keysData;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>return [];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>}, [quizMode]);</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const selectRandomKey = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (filteredKeys.length === 0) return;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const randomIndex = Math.floor(Math.random() * filteredKeys.length);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setCurrentKey(filteredKeys[randomIndex]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>// Non resettiamo feedback/guess qui, lo facciamo quando l'utente torna alla domanda</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>// Ma per il nextQuestion, viene gestito dopo</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setUserGuess('');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setFeedback(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>useEffect(() =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (quizMode !== 'select' &amp;&amp; filteredKeys.length &gt; 0) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>const randomIndex = Math.floor(Math.random() * filteredKeys.length);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setCurrentKey(filteredKeys[randomIndex]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setIsFlipped(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setUserGuess('');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setFeedback(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>}, [quizMode, filteredKeys.length]);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const handleGuessChange = (e) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const value = e.target.value.replace(/[^0-7]/g, '');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setUserGuess(value);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (feedback !== null) setFeedback(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const checkAnswer = (e) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>e.preventDefault();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>if (userGuess === '' || isFlipped) return;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>const correct = parseInt(userGuess, 10) === currentKey.alterationCount;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setFeedback(correct ? 'correct' : 'incorrect');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; { setIsFlipped(true); }, 500);<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const nextQuestion = () =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setIsFlipped(false);<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; { selectRandomKey(); }, 250);<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const backToMenu = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setQuizMode('select');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>setIsFlipped(false); // Reset stato flip quando si torna al menu</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>if (quizMode === 'select') {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;div className="flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4 font-sans"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                      </span>&lt;div className="mb-8 text-center animate-fade-in-down"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                          </span>&lt;h1 className="text-3xl font-bold text-slate-800 flex items-center justify-center gap-2 mb-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                              </span>&lt;Music className="w-8 h-8 text-indigo-500" /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                              </span>Quiz Tonalità</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                          </span>&lt;/h1&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                          </span>&lt;p className="text-slate-500"&gt;Mettiti alla prova&lt;/p&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                      </span>&lt;QuizSelection setMode={setQuizMode} /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>if (!currentKey) return &lt;div className="text-center p-8"&gt;Caricamento...&lt;/div&gt;;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>let alterationType, headerText;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>if (quizMode === 'sharps') { alterationType = "diesis"; headerText = "Diesis (#)"; }<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>else if (quizMode === 'flats') { alterationType = "bemolle"; headerText = &lt;span&gt;Bemolle (♭)&lt;/span&gt;; }<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>else { alterationType = "alterazioni"; headerText = "Tutte le Tonalità"; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>const promptText = (quizMode === 'mix' &amp;&amp; currentKey.alterationCount === 0)<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>? "Inserisci il numero di alterazioni"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>: &lt;span&gt;Numero di {alterationType}?&lt;/span&gt;;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div className="flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4 font-sans"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div className="mb-6 text-center"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div className="inline-flex items-center justify-center px-4 py-1.5 rounded-full bg-white border border-slate-200 shadow-sm text-sm font-medium text-slate-500 mb-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>{headerText}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h2 className="text-lg text-slate-400 font-medium"&gt;{promptText}&lt;/h2&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div className="relative w-full max-w-sm h-[480px] perspective-1000 group"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div className={`relative w-full h-full duration-500 transform-style-3d transition-transform ${isFlipped ? 'rotate-y-180' : ''}`}&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                  </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>{/* FRONT */}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;div<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>className="absolute w-full h-full bg-white rounded-3xl shadow-card backface-hidden flex flex-col items-center border-2 border-slate-100 overflow-hidden"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>style={{ zIndex: isFlipped ? 0 : 10 }}<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="w-full h-3" style={{ backgroundColor: currentKey.color }}&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="flex-1 flex flex-col items-center justify-center w-full p-8 space-y-8"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="text-center space-y-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span className="text-xs font-bold tracking-widest text-slate-300 uppercase"&gt;Tonalità&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h2 className="text-4xl font-black text-slate-800 tracking-tight leading-none"&gt;{currentKey.name}&lt;/h2&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p className="text-2xl font-medium text-slate-400"&gt;{currentKey.subName}&lt;/p&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;form onSubmit={checkAnswer} className="w-full flex flex-col items-center space-y-6"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="relative flex items-center justify-center"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;input type="tel" value={userGuess} onChange={handleGuessChange} maxLength="1" min="0" max="7" disabled={isFlipped} className="w-24 h-24 text-6xl font-bold text-center bg-slate-50 border-2 border-slate-200 rounded-2xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 outline-none transition-all text-slate-700 placeholder-slate-200 shadow-inner" placeholder="?" autoFocus /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>{feedback === 'correct' &amp;&amp; !isFlipped &amp;&amp; &lt;div className="absolute -right-12 top-1/2 -translate-y-1/2"&gt;&lt;CheckCircle className="w-8 h-8 text-emerald-500 drop-shadow-sm animate-bounce" strokeWidth={3} /&gt;&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>{feedback === 'incorrect' &amp;&amp; !isFlipped &amp;&amp; &lt;div className="absolute -right-12 top-1/2 -translate-y-1/2"&gt;&lt;XCircle className="w-8 h-8 text-red-500 drop-shadow-sm animate-shake" strokeWidth={3} /&gt;&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button type="submit" disabled={isFlipped || userGuess === ''} className="w-full py-4 bg-gradient-to-r from-indigo-600 to-indigo-500 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-indigo-200 hover:scale-[1.02] active:scale-[.98] transition-all disabled:opacity-50 disabled:shadow-none disabled:scale-100 hover:from-indigo-700 hover:to-indigo-600"&gt;Verifica&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/form&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button type="button" onClick={backToMenu} className="w-full py-4 bg-slate-50 text-slate-400 text-sm font-medium hover:text-slate-600 transition-colors border-t border-slate-100 flex items-center justify-center gap-2"&gt;&lt;RotateCcw size={14} /&gt; Torna al Menù&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>{/* BACK */}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;div<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>className="absolute w-full h-full bg-white rounded-3xl shadow-card backface-hidden rotate-y-180 flex flex-col items-center border-2 border-slate-100 overflow-hidden"</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>style={{ zIndex: isFlipped ? 10 : 0 }}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="w-full h-3" style={{ backgroundColor: currentKey.color }}&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="flex-1 w-full p-6 flex flex-col items-center"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="text-center mb-6"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h3 className="text-2xl font-bold text-slate-800"&gt;{currentKey.name}&lt;/h3&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p className="text-slate-400 font-medium"&gt;{currentKey.subName}&lt;/p&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className={`w-full rounded-2xl p-4 mb-4 border ${feedback === 'correct' ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="flex items-center justify-between mb-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;span className="text-xs font-bold uppercase tracking-wider text-slate-400"&gt;Soluzione&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;span className={`text-sm font-bold ${feedback === 'correct' ? 'text-emerald-600' : 'text-red-600'}`}&gt;{feedback === 'correct' ? 'Corretto!' : 'Errato'}&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div className="flex items-end gap-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;span className="text-4xl font-black text-slate-700 leading-none"&gt;{currentKey.alterationCount}&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;span className="text-sm font-medium text-slate-500 mb-1"&gt;{currentKey.alterationsList}&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div className="w-full p-3 bg-slate-50 rounded-2xl border border-slate-100 mb-auto"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                           </span>&lt;PianoKeyboard activeNotes={currentKey.notesIndices} dotColor={currentKey.color} tonicIndex={currentKey.tonicIndex} /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>{/* FOOTER */}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div className="w-full px-6 pb-4"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onClick={nextQuestion} className={`w-full py-3.5 text-white font-bold rounded-xl shadow-md transition-all active:scale-[.98] flex items-center justify-center gap-2 ${feedback === 'correct' ? 'bg-emerald-500 hover:bg-emerald-600 shadow-emerald-200' : 'bg-blue-500 hover:bg-blue-600 shadow-blue-200'}`}&gt;&lt;RefreshCw size={20} /&gt; Prossima&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>{/* Pulsante Torna al Menu Identico al Front */}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button type="button" onClick={backToMenu} className="w-full py-4 bg-slate-50 text-slate-400 text-sm font-medium hover:text-slate-600 transition-colors border-t border-slate-100 flex items-center justify-center gap-2"&gt;&lt;RotateCcw size={14} /&gt; Torna al Menù&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p5"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>const root = ReactDOM.createRoot(document.getElementById('root'));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>root.render(&lt;KeySignatureQuiz /&gt;);</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
